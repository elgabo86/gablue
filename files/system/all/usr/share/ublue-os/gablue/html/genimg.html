<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Générateur d'images IA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #7c3aed;
            --primary-dark: #6d28d9;
            --secondary: #22d3ee;
            --dark: #1f2937;
            --light: #e5e7eb;
            --danger: #ef4444;
            --success: #10b981;
            --warning: #f59e0b;
            --background: #111827;
            --card-background: #1f2937;
            --text: #d1d5db;
            --text-muted: #9ca3af;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: var(--light);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .subtitle {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        .app-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            background: var(--card-background);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .controls {
            padding: 2rem;
            background: var(--card-background);
        }

        .image-preview {
            padding: 2rem;
            background: var(--dark);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 600px;
            position: relative;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text);
        }

        input,
        textarea,
        select {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid var(--text-muted);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--dark);
            color: var(--text);
            transition: all 0.3s ease;
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
        }

        .custom-select {
            position: relative;
            width: 100%;
        }

        .custom-select-toggle {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid var(--text-muted);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--dark);
            color: var(--text);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .custom-select-toggle:hover {
            border-color: var(--primary);
        }

        .custom-select-toggle:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
        }

        .custom-select-options {
            position: absolute;
            left: 0;
            right: 0;
            max-height: 400px;
            overflow-y: auto;
            background: var(--card-background);
            border: 1px solid var(--text-muted);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: none;
        }

        .custom-select-options.show {
            display: block;
        }

        .custom-select-options.open-up {
            bottom: 100%;
            top: auto;
        }

        .custom-select-options.open-down {
            top: 100%;
            bottom: auto;
        }

        .custom-select-option {
            padding: 0.5rem 1rem;
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .custom-select-option:hover {
            background: var(--primary-dark);
            color: white;
        }

        .custom-select-option.category {
            background: var(--dark);
            color: var(--text-muted);
            font-weight: bold;
            padding: 0.5rem 1rem;
            border-top: 1px solid var(--text-muted);
            cursor: default;
        }

        .tooltip {
            position: fixed;
            background: var(--primary-dark);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 0.9rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            display: none;
            max-width: 300px;
            pointer-events: none;
        }

        .tooltip.show {
            display: block;
        }

        .tooltip::before {
            content: '';
            position: absolute;
            top: 50%;
            left: -6px;
            transform: translateY(-50%);
            border-width: 6px;
            border-style: solid;
            border-color: transparent var(--primary-dark) transparent transparent;
        }

        @media (max-width: 768px) {
            .custom-select-toggle {
                font-size: 0.9rem;
                padding: 0.6rem;
            }

            .custom-select-option {
                font-size: 0.9rem;
                padding: 0.6rem 1rem;
            }

            .tooltip {
                font-size: 0.8rem;
                max-width: 200px;
            }
        }

        .btn {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(124, 58, 237, 0.4);
        }

        .btn:disabled {
            background-color: var(--text-muted);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .btn-secondary {
            background-color: var(--secondary);
        }

        .btn-secondary:hover {
            background-color: #06b6d4;
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-danger:hover {
            background-color: #dc2626;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .checkbox-group input {
            width: auto;
        }

        .checkbox-group label {
            margin-bottom: 0;
            font-weight: normal;
        }

        .generated-image {
            max-width: 100%;
            max-height: 500px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: none;
            cursor: pointer;
        }

        .placeholder {
            text-align: center;
            color: var(--text-muted);
        }

        .placeholder i {
            font-size: 4rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .loading {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--text-muted);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
            will-change: transform;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .history {
            margin-top: 2rem;
            display: none;
        }

        .history.show {
            display: block;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .history h3 {
            margin-bottom: 1rem;
            color: var(--primary);
        }

        .history-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }

        .history-item {
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .history-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        }

        .history-item img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            display: block;
        }

        .history-item .prompt {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.5rem;
            font-size: 0.8rem;
            display: none;
        }

        .history-item:hover .prompt {
            display: block;
        }

        .history-delete-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 0.8rem;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .history-item:hover .history-delete-btn {
            display: flex;
        }

        .history-delete-btn:hover {
            background: #dc2626;
            transform: scale(1.1);
        }

        footer {
            text-align: center;
            margin-top: 2rem;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .app-container {
                grid-template-columns: 1fr;
            }
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--dark);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 3000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.success {
            background: var(--success);
        }

        .toast.error {
            background: var(--danger);
        }

        .image-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .image-overlay.show {
            display: flex;
        }

        .image-overlay img {
            max-width: 90%;
            max-height: 90vh;
            border-radius: 8px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            display: block;
            margin: auto;
        }

        .image-overlay .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .image-overlay .close-btn:hover {
            background: #dc2626;
            transform: scale(1.1);
        }

        .image-overlay .overlay-buttons {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            display: flex;
            gap: 1rem;
        }

        .image-overlay .copy-btn,
        .image-overlay .download-btn {
            background: var(--primary);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .image-overlay .copy-btn:hover,
        .image-overlay .download-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .image-overlay .delete-btn {
            position: absolute;
            bottom: 1rem;
            left: 1rem;
            background: var(--danger);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .image-overlay .delete-btn:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        .seed-container {
            position: relative;
        }

        .clear-seed-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 1rem;
            cursor: pointer;
            padding: 0.2rem;
            transition: all 0.3s ease;
        }

        .clear-seed-btn:hover {
            color: var(--danger);
        }

        .custom-select-option.popular {
            background: rgba(124, 58, 237, 0.1);
            font-weight: bold;
        }

        .custom-select-option.popular:hover {
            background: var(--primary-dark);
            color: white;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>Générateur d'images IA</h1>
        </header>

        <div class="app-container">
            <div class="controls">
                <div class="form-group">
                    <label for="prompt">Description de l'image</label>
                    <textarea id="prompt" placeholder="Décrivez l'image que vous souhaitez générer..."></textarea>
                </div>

                <div class="form-group">
                    <label for="model">Modèle</label>
                    <select id="model">
                        <option value="flux" selected>Flux (par défaut)</option>
                        <option value="turbo">Turbo</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="dimensions">Dimensions</label>
                    <select id="dimensions">
                        <option value="512x512">512x512 (Carré, 1:1)</option>
                        <option value="1024x1024">1024x1024 (Carré, 1:1)</option>
                        <option value="800x600">800x600 (Paysage, 4:3)</option>
                        <option value="1024x576">1024x576 (Paysage, 16:9)</option>
                        <option value="1280x720" selected>1280x720 (Paysage, 16:9)</option>
                        <option value="600x800">600x800 (Portrait, 3:4)</option>
                        <option value="576x1024">576x1024 (Portrait, 9:16)</option>
                        <option value="720x1280">720x1280 (Portrait, 9:16)</option>
                        <option value="1600x400">1600x400 (Ultrawide, 4:1)</option>
                        <option value="1920x480">1920x480 (Ultrawide, 4:1)</option>
                        <option value="2048x512">2048x512 (Ultrawide, 4:1)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="seed">Graine (laisser vide pour aléatoire)</label>
                    <div class="seed-container">
                        <input type="text" id="seed" placeholder="Graine aléatoire" pattern="[0-9]*">
                        <button class="clear-seed-btn" id="clear-seed-btn"><i class="fas fa-times"></i></button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="style">Style</label>
                    <div class="custom-select" id="style">
                        <div class="custom-select-toggle">
                            <span class="custom-select-label">Défaut</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="custom-select-options">
                            <div class="custom-select-option" data-value="default"
                                data-tooltip="Style par défaut sans modification esthétique">Défaut</div>
                            <div class="custom-select-option category">──── Populaires ────</div>
                            <div class="custom-select-option popular" data-value="anime"
                                data-tooltip="Style d'animation japonaise avec lignes nettes, couleurs vibrantes et expressions exagérées">
                                Anime</div>
                            <div class="custom-select-option popular" data-value="realistic"
                                data-tooltip="Rendu photoréaliste avec détails précis et textures naturelles">Réaliste
                            </div>
                            <div class="custom-select-option popular" data-value="cartoon"
                                data-tooltip="Style animé avec contours nets et couleurs vives, comme un dessin animé">
                                Cartoon</div>
                            <div class="custom-select-option popular" data-value="oilpainting"
                                data-tooltip="Peinture à l'huile classique avec coups de pinceau épais et couleurs riches">
                                Peinture à l'huile</div>
                            <div class="custom-select-option popular" data-value="watercolor"
                                data-tooltip="Effet de peinture à l'aquarelle avec des couleurs douces et translucides">
                                Aquarelle</div>
                            <div class="custom-select-option popular" data-value="sketch"
                                data-tooltip="Croquis au crayon ou à l'encre avec traits visibles et esthétique minimaliste">
                                Croquis</div>
                            <div class="custom-select-option category">──── Artistiques Classiques ────</div>
                            <div class="custom-select-option" data-value="artdeco"
                                data-tooltip="Style élégant des années 1920 avec des motifs géométriques et dorés">Art
                                Déco</div>
                            <div class="custom-select-option" data-value="baroque"
                                data-tooltip="Esthétique opulente du XVIIe siècle avec des détails riches et dorés">
                                Baroque</div>
                            <div class="custom-select-option" data-value="bauhaus"
                                data-tooltip="Style moderniste avec des formes géométriques et des couleurs primaires">
                                Bauhaus</div>
                            <div class="custom-select-option" data-value="chiaroscuro"
                                data-tooltip="Jeu dramatique de lumière et d'ombre, inspiré des peintures de Caravage">
                                Chiaroscuro</div>
                            <div class="custom-select-option" data-value="expressionist"
                                data-tooltip="Émotions brutes avec des couleurs contrastées et des formes exagérées">
                                Expressionniste</div>
                            <div class="custom-select-option" data-value="gouache"
                                data-tooltip="Peinture épaisse et texturée avec des couleurs vibrantes et des coups de pinceau">
                                Gouache</div>
                            <div class="custom-select-option" data-value="marble"
                                data-tooltip="Esthétique de marbre sculpté avec veines élégantes et tons luxueux">Marbre
                            </div>
                            <div class="custom-select-option" data-value="mosaic"
                                data-tooltip="Motifs composés de petites tuiles colorées, comme l'art byzantin">Mosaïque
                            </div>
                            <div class="custom-select-option" data-value="popart"
                                data-tooltip="Couleurs audacieuses et motifs répétitifs, inspiré d'Andy Warhol">Pop Art
                            </div>
                            <div class="custom-select-option" data-value="surrealist"
                                data-tooltip="Scènes irréelles et oniriques, comme les œuvres de Dalí">Surréaliste</div>
                            <div class="custom-select-option" data-value="ukiyo-e"
                                data-tooltip="Estampes japonaises traditionnelles avec des lignes fluides et des scènes poétiques">
                                Ukiyo-e</div>
                            <div class="custom-select-option category">──── Modernes/Graphiques ────</div>
                            <div class="custom-select-option" data-value="chalkboard"
                                data-tooltip="Style tableau noir avec des traits de craie et une vibe rétro éducative">
                                Tableau Craie</div>
                            <div class="custom-select-option" data-value="glitchart"
                                data-tooltip="Effets visuels numériques cassés avec des distorsions et artefacts colorés">
                                Glitch Art</div>
                            <div class="custom-select-option" data-value="holographic"
                                data-tooltip="Effets irisés et brillants, comme des hologrammes futuristes">
                                Holographique</div>
                            <div class="custom-select-option" data-value="holographicretro"
                                data-tooltip="Holographie rétrofuturiste avec reflets irisés et vibe années 80">
                                Holographique Rétro</div>
                            <div class="custom-select-option" data-value="lowpoly"
                                data-tooltip="Formes géométriques polygonales en 3D minimaliste">Low Poly</div>
                            <div class="custom-select-option" data-value="minimalist"
                                data-tooltip="Design épuré avec peu de détails et des couleurs simples">Minimaliste
                            </div>
                            <div class="custom-select-option" data-value="papercut"
                                data-tooltip="Découpages de papier avec couches superposées et ombres délicates">
                                Papercut</div>
                            <div class="custom-select-option" data-value="pixelart"
                                data-tooltip="Esthétique rétro des jeux vidéo avec des pixels visibles">Pixel Art</div>
                            <div class="custom-select-option" data-value="vectorart"
                                data-tooltip="Graphismes épurés avec des lignes nettes et des formes plates">Vector Art
                            </div>
                            <div class="custom-select-option category">──── Futuristes ────</div>
                            <div class="custom-select-option" data-value="afrofuturism"
                                data-tooltip="Fusion de science-fiction et culture africaine avec des motifs vibrants">
                                Afrofuturisme</div>
                            <div class="custom-select-option" data-value="biopunk"
                                data-tooltip="Technologie organique et mutations dans une vibe dystopique">Biopunk</div>
                            <div class="custom-select-option" data-value="cyberpunk"
                                data-tooltip="Ambiance high-tech sombre avec néons et dystopie urbaine">Cyberpunk</div>
                            <div class="custom-select-option" data-value="dieselpunk"
                                data-tooltip="Style rétro-futuriste des années 30-40 avec machines robustes">Dieselpunk
                            </div>
                            <div class="custom-select-option" data-value="neonnoir"
                                data-tooltip="Mélange de cyberpunk et film noir avec néons et ambiance pluvieuse">Néon
                                Noir</div>
                            <div class="custom-select-option" data-value="retrofuture"
                                data-tooltip="Vision du futur des années 50-60 avec fusées et dômes vintage">
                                Rétrofuturiste</div>
                            <div class="custom-select-option" data-value="solarpunk"
                                data-tooltip="Futur écologique utopique avec technologies vertes et nature">Solarpunk
                            </div>
                            <div class="custom-select-option" data-value="synthwave"
                                data-tooltip="Esthétique rétro-futuriste des années 80 avec néons et grilles">Synthwave
                            </div>
                            <div class="custom-select-option category">──── Fantastiques/Magiques ────</div>
                            <div class="custom-select-option" data-value="bioluminescent"
                                data-tooltip="Lueurs néon comme des organismes bioluminescents, vibe sous-marine magique">
                                Bioluminescent</div>
                            <div class="custom-select-option" data-value="biopoetic"
                                data-tooltip="Formes organiques fluides avec une ambiance vivante et poétique">
                                Biopoétique</div>
                            <div class="custom-select-option" data-value="dreamscape"
                                data-tooltip="Scènes irréelles et floues, comme dans un rêve">Paysage Onirique</div>
                            <div class="custom-select-option" data-value="enchanted"
                                data-tooltip="Ambiance magique avec lueurs douces et éléments féeriques">Enchanté</div>
                            <div class="custom-select-option" data-value="ethereal"
                                data-tooltip="Esthétique aérienne avec tons pastel et légèreté surnaturelle">Éthéré
                            </div>
                            <div class="custom-select-option" data-value="fantasy"
                                data-tooltip="Univers épiques avec créatures et paysages fantastiques">Fantaisie</div>
                            <div class="custom-select-option" data-value="luminist"
                                data-tooltip="Ambiance centrée sur la lumière avec halos et reflets divins">Luministe
                            </div>
                            <div class="custom-select-option" data-value="mythic"
                                data-tooltip="Scènes inspirées des mythologies avec une aura sacrée">Mythique</div>
                            <div class="custom-select-option" data-value="whimsical"
                                data-tooltip="Ambiance ludique avec éléments excentriques et couleurs douces">
                                Fantaisiste</div>
                            <div class="custom-select-option category">──── Sombres/Dramatiques ────</div>
                            <div class="custom-select-option" data-value="apocalyptic"
                                data-tooltip="Scènes post-apocalyptiques avec ruines et cieux sombres">Apocalyptique
                            </div>
                            <div class="custom-select-option" data-value="gothic"
                                data-tooltip="Ambiance mystérieuse avec tons sombres et détails ornés">Gothique</div>
                            <div class="custom-select-option" data-value="noir"
                                data-tooltip="Esthétique monochrome des films noirs avec ombres dramatiques">Noir (Film
                                Noir)</div>
                            <div class="custom-select-option" data-value="xenomorphic"
                                data-tooltip="Formes biomécaniques extraterrestres, inspirées de H.R. Giger">Xénomorphe
                            </div>
                            <div class="custom-select-option category">──── Vibrants/Alternatifs ────</div>
                            <div class="custom-select-option" data-value="fractal"
                                data-tooltip="Motifs géométriques complexes et répétitifs, comme des fractales">Fractal
                            </div>
                            <div class="custom-select-option" data-value="graffiti"
                                data-tooltip="Style urbain avec couleurs vives et motifs de street art">Graffiti</div>
                            <div class="custom-select-option" data-value="grunge"
                                data-tooltip="Esthétique brute avec textures rugueuses et couleurs désaturées">Grunge
                            </div>
                            <div class="custom-select-option" data-value="kawaii"
                                data-tooltip="Style japonais mignon avec personnages adorables et pastel">Kawaii</div>
                            <div class="custom-select-option" data-value="prismatic"
                                data-tooltip="Couleurs éclatantes réfractées, comme à travers un prisme">Prismatique
                            </div>
                            <div class="custom-select-option" data-value="psychedelic"
                                data-tooltip="Couleurs vives et motifs tourbillonnants, ambiance années 60">
                                Psychédélique</div>
                            <div class="custom-select-option" data-value="vaporwave"
                                data-tooltip="Nostalgie rétro des années 80-90 avec néons et pastel">Vaporwave</div>
                            <div class="custom-select-option category">──── Décoratifs ────</div>
                            <div class="custom-select-option" data-value="claymation"
                                data-tooltip="Style pâte à modeler avec textures douces et vibe artisanale">Claymation
                            </div>
                            <div class="custom-select-option" data-value="knitted"
                                data-tooltip="Textures de laine avec motifs entrelacés, vibe chaleureuse et artisanale">
                                Tricoté</div>
                            <div class="custom-select-option" data-value="origami"
                                data-tooltip="Esthétique de pliage de papier avec formes géométriques nettes">Origami
                            </div>
                            <div class="custom-select-option" data-value="stainedglass"
                                data-tooltip="Couleurs vibrantes séparées par des lignes noires, comme un vitrail">
                                Vitrail</div>
                            <div class="custom-select-option" data-value="velvet"
                                data-tooltip="Textures riches de velours avec couleurs profondes et ambiance opulente">
                                Velours</div>
                            <div class="custom-select-option category">──── Cosmiques ────</div>
                            <div class="custom-select-option" data-value="cosmic"
                                data-tooltip="Ambiance spatiale avec étoiles, galaxies et tons profonds">Cosmique</div>
                            <div class="custom-select-option" data-value="microscopic"
                                data-tooltip="Images au microscope avec détails cellulaires et couleurs fluorescentes">
                                Microscopique</div>
                            <div class="custom-select-option category">──── Steampunk ────</div>
                            <div class="custom-select-option" data-value="steampunk"
                                data-tooltip="Machines rétro-futuristes avec engrenages et vapeur">Steampunk</div>
                            <div class="custom-select-option category">──── Audacieux ────</div>
                            <div class="custom-select-option" data-value="boudoir"
                                data-tooltip="Style intime et luxueux avec textures soyeuses et sensualité raffinée">
                                Boudoir</div>
                            <div class="custom-select-option" data-value="cabaret"
                                data-tooltip="Spectacles burlesques avec couleurs riches et vibe théâtrale provocante">
                                Cabaret</div>
                            <div class="custom-select-option" data-value="erotic"
                                data-tooltip="Art sensuel avec formes fluides et ambiance suggestive">
                                Érotique</div>
                            <div class="custom-select-option" data-value="fetishnoir"
                                data-tooltip="Ambiance sombre avec cuir, contrastes forts et mystère audacieux">Fetish
                                Noir</div>
                            <div class="custom-select-option" data-value="pinup"
                                data-tooltip="Style rétro des années 50 avec poses audacieuses et glamour espiègle">
                                Pin-Up</div>
                        </div>
                    </div>
                    <input type="hidden" id="style-value" name="style" value="default">
                </div>

                <div class="form-group">
                    <label>Options</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="enhance" checked>
                        <label for="enhance">Améliorer la description avec l'IA</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="safe">
                        <label for="safe">Filtre NSFW</label>
                    </div>
                </div>

                <button id="generate-btn" class="btn btn-block">
                    <i class="fas fa-magic"></i> Générer l'image
                </button>
            </div>

            <div class="image-preview">
                <div id="loading" class="loading">
                    <div class="spinner"></div>
                    <p>Génération de votre image...</p>
                </div>

                <div id="placeholder" class="placeholder">
                    <i class="fas fa-image"></i>
                    <p>Votre image générée apparaîtra ici</p>
                </div>

                <img id="generated-image" class="generated-image" alt="Image générée">
            </div>
        </div>

        <div class="history">
            <div class="history-header">
                <h3>Historique des générations</h3>
                <button id="clear-history-btn" class="btn btn-danger">
                    <i class="fas fa-trash"></i> Effacer l'Historique
                </button>
            </div>
            <div id="history-items" class="history-items">
            </div>
        </div>

        <footer>
            <p>Propulsé par Elgabo ✨</p><br>
        </footer>
    </div>

    <div id="image-overlay" class="image-overlay">
        <img id="overlay-image" src="" alt="Image agrandie">
        <button class="close-btn" id="close-overlay"><i class="fas fa-times"></i></button>
        <button class="delete-btn" id="overlay-delete"><i class="fas fa-trash"></i> Supprimer</button>
        <div class="overlay-buttons">
            <button class="copy-btn" id="overlay-copy"><i class="fas fa-copy"></i> Copier</button>
            <button class="download-btn" id="overlay-download"><i class="fas fa-download"></i> Télécharger</button>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let isGenerating = false;
            let isWaiting = false;
            let currentPrompt = '';
            let abortController = null;

            document.getElementById('prompt').value = '';
            document.getElementById('model').value = 'flux';
            document.getElementById('dimensions').value = '1280x720';
            document.getElementById('seed').value = '';
            document.getElementById('style-value').value = 'default';
            document.getElementById('generated-image').style.display = 'none';
            document.getElementById('placeholder').style.display = 'block';
            document.getElementById('image-overlay').classList.remove('show');

            const promptTextarea = document.getElementById('prompt');
            promptTextarea.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    if (!isGenerating) generateImage();
                }
            });

            const customSelect = document.querySelector('.custom-select');
            const toggle = customSelect.querySelector('.custom-select-toggle');
            const options = customSelect.querySelector('.custom-select-options');
            const selectLabel = customSelect.querySelector('.custom-select-label');
            const styleInput = document.getElementById('style-value');
            const tooltip = document.getElementById('tooltip');

            toggle.addEventListener('click', () => {
                const toggleRect = toggle.getBoundingClientRect();
                const optionsHeight = 400;
                const spaceBelow = window.innerHeight - toggleRect.bottom;
                const spaceAbove = toggleRect.top;

                options.classList.remove('open-up', 'open-down');
                if (spaceBelow < optionsHeight && spaceAbove > spaceBelow) {
                    options.classList.add('open-up');
                } else {
                    options.classList.add('open-down');
                }

                options.classList.toggle('show');
            });

            document.querySelectorAll('.custom-select-option:not(.category)').forEach(option => {
                option.addEventListener('click', () => {
                    const value = option.getAttribute('data-value');
                    selectLabel.textContent = option.textContent;
                    styleInput.value = value;
                    options.classList.remove('show');
                });

                option.addEventListener('mousemove', (e) => {
                    const tooltipText = option.getAttribute('data-tooltip');
                    if (tooltipText) {
                        tooltip.textContent = tooltipText;
                        tooltip.classList.add('show');

                        const rect = option.getBoundingClientRect();
                        tooltip.style.top = `${rect.top + (rect.height / 2) - (tooltip.offsetHeight / 2)}px`;
                        tooltip.style.left = `${rect.right + window.scrollX + 10}px`;

                        const tooltipRect = tooltip.getBoundingClientRect();
                        if (tooltipRect.right > window.innerWidth) {
                            tooltip.style.left = `${rect.left + window.scrollX - tooltipRect.width - 10}px`;
                            tooltip.classList.add('left');
                        } else {
                            tooltip.classList.remove('left');
                        }
                    }
                });

                option.addEventListener('mouseleave', () => {
                    tooltip.classList.remove('show');
                });
            });

            document.addEventListener('click', (e) => {
                if (!customSelect.contains(e.target)) {
                    options.classList.remove('show');
                }
            });

            const generateBtn = document.getElementById('generate-btn');
            generateBtn.addEventListener('click', () => {
                if (isGenerating) {
                    stopGeneration();
                } else {
                    generateImage();
                }
            });

            const clearHistoryBtn = document.getElementById('clear-history-btn');
            clearHistoryBtn.addEventListener('click', () => {
                if (window.confirm('Voulez-vous vraiment effacer tout l\'historique des images générées ? Cette action est irréversible.')) {
                    clearHistory();
                }
            });

            const clearSeedBtn = document.getElementById('clear-seed-btn');
            clearSeedBtn.addEventListener('click', () => {
                document.getElementById('seed').value = '';
            });

            const generatedImage = document.getElementById('generated-image');
            const imageOverlay = document.getElementById('image-overlay');
            const overlayImage = document.getElementById('overlay-image');
            const overlayDownload = document.getElementById('overlay-download');
            const overlayCopy = document.getElementById('overlay-copy');
            const overlayDelete = document.getElementById('overlay-delete');
            const closeOverlay = document.getElementById('close-overlay');

            generatedImage.addEventListener('click', () => {
                if (generatedImage.style.display === 'block' && generatedImage.src) {
                    overlayImage.src = generatedImage.src;
                    imageOverlay.classList.add('show');
                }
            });

            overlayDownload.addEventListener('click', () => {
                fetch(overlayImage.src)
                    .then(response => response.blob())
                    .then(blob => {
                        const url = window.URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.href = url;
                        link.download = generateFileName(currentPrompt);
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                        window.URL.revokeObjectURL(url);
                    })
                    .catch(error => {
                        console.error('Failed to download image:', error);
                        showToast('Erreur lors du téléchargement de l\'image.', 'error');
                    });
            });

            overlayCopy.addEventListener('click', () => {
                convertToPng(overlayImage.src)
                    .then(blob => {
                        const item = new ClipboardItem({ 'image/png': blob });
                        return navigator.clipboard.write([item]);
                    })
                    .then(() => {
                        showToast('Image copiée dans le presse-papier !', 'success');
                    })
                    .catch(error => {
                        console.error('Failed to copy image:', error);
                        showToast('Erreur lors de la copie de l\'image. Essayez un autre navigateur.', 'error');
                    });
            });

            overlayDelete.addEventListener('click', () => {
                const imageUrl = overlayImage.src;
                let history = JSON.parse(localStorage.getItem('imageHistory') || '[]');
                history = history.filter(item => item.imageUrl !== imageUrl);
                localStorage.setItem('imageHistory', JSON.stringify(history));
                loadHistory();
                showToast('Image supprimée de l\'historique !', 'success');
                generatedImage.style.display = 'none';
                document.getElementById('placeholder').style.display = 'block';
                document.getElementById('prompt').value = '';
                document.getElementById('model').value = 'flux';
                document.getElementById('dimensions').value = '1280x720';
                document.getElementById('seed').value = '';
                document.getElementById('style-value').value = 'default';
                document.querySelector('.custom-select-label').textContent = 'Défaut';
                imageOverlay.classList.remove('show');
            });

            closeOverlay.addEventListener('click', () => {
                imageOverlay.classList.remove('show');
            });

            imageOverlay.addEventListener('click', (e) => {
                if (e.target === imageOverlay) {
                    imageOverlay.classList.remove('show');
                }
            });

            function loadHistory() {
                const history = JSON.parse(localStorage.getItem('imageHistory') || '[]');
                const historyContainer = document.getElementById('history-items');
                const historySection = document.querySelector('.history');

                historyContainer.innerHTML = '';

                if (history.length === 0) {
                    historySection.classList.remove('show');
                    return;
                }

                historySection.classList.add('show');

                history.forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    historyItem.innerHTML = `
                        <img src="${item.imageUrl}" alt="${item.prompt}">
                        <button class="history-delete-btn"><i class="fas fa-times"></i></button>
                        <div class="prompt">${item.prompt}</div>
                    `;

                    const deleteBtn = historyItem.querySelector('.history-delete-btn');
                    deleteBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        let history = JSON.parse(localStorage.getItem('imageHistory') || '[]');
                        history = history.filter(h => h.imageUrl !== item.imageUrl);
                        localStorage.setItem('imageHistory', JSON.stringify(history));
                        loadHistory();
                        showToast('Image supprimée de l\'historique !', 'success');
                        document.getElementById('generated-image').style.display = 'none';
                        document.getElementById('placeholder').style.display = 'block';
                        document.getElementById('prompt').value = '';
                        document.getElementById('model').value = 'flux';
                        document.getElementById('dimensions').value = '1280x720';
                        document.getElementById('seed').value = '';
                        document.getElementById('style-value').value = 'default';
                        document.querySelector('.custom-select-label').textContent = 'Défaut';
                    });

                    historyItem.addEventListener('click', () => {
                        document.getElementById('prompt').value = item.prompt;
                        const generatedImage = document.getElementById('generated-image');
                        generatedImage.src = item.imageUrl;
                        generatedImage.style.display = 'block';
                        document.getElementById('placeholder').style.display = 'none';
                        document.getElementById('seed').value = item.seed || '';
                        document.getElementById('model').value = item.model || 'flux';
                        document.getElementById('dimensions').value = item.dimensions || '1280x720';
                        document.getElementById('style-value').value = item.style || 'default';
                        document.querySelector('.custom-select-label').textContent =
                            document.querySelector(`.custom-select-option[data-value="${item.style || 'default'}"]`).textContent;
                        currentPrompt = item.prompt;
                    });

                    historyContainer.appendChild(historyItem);
                });
            }

            function clearHistory() {
                localStorage.removeItem('imageHistory');
                loadHistory();
                document.getElementById('generated-image').style.display = 'none';
                document.getElementById('placeholder').style.display = 'block';
                document.getElementById('prompt').value = '';
                document.getElementById('model').value = 'flux';
                document.getElementById('dimensions').value = '1280x720';
                document.getElementById('seed').value = '';
                document.getElementById('style-value').value = 'default';
                document.querySelector('.custom-select-label').textContent = 'Défaut';
                document.getElementById('image-overlay').classList.remove('show');
            }

            function showToast(message, type = '') {
                const toast = document.getElementById('toast');
                toast.textContent = message;
                toast.className = 'toast';
                toast.classList.add(type);
                toast.classList.add('show');

                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }

            function startCooldown() {
                isWaiting = true;
                let timeLeft = 3;
                generateBtn.disabled = true;
                const originalText = '<i class="fas fa-magic"></i> Générer l\'image';
                generateBtn.innerHTML = `Attendez ${timeLeft}s`;

                const countdown = setInterval(() => {
                    timeLeft--;
                    generateBtn.innerHTML = `Attendez ${timeLeft}s`;
                    if (timeLeft <= 0) {
                        clearInterval(countdown);
                        generateBtn.innerHTML = originalText;
                        generateBtn.disabled = false;
                        isWaiting = false;
                    }
                }, 1000);
            }

            function generateFileName(prompt) {
                let cleanPrompt = prompt
                    .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
                    .replace(/[^a-zA-Z0-9\s-]/g, '')
                    .trim()
                    .replace(/\s+/g, '-')
                    .toLowerCase();
                if (cleanPrompt.length > 50) {
                    cleanPrompt = cleanPrompt.substring(0, 50);
                    cleanPrompt = cleanPrompt.substring(0, cleanPrompt.lastIndexOf('-') + 1) || cleanPrompt;
                }
                return cleanPrompt ? `${cleanPrompt}.jpg` : 'image-ia.jpg';
            }

            function convertToPng(imageSrc) {
                return new Promise((resolve, reject) => {
                    const img = new Image();
                    img.crossOrigin = 'Anonymous';
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        canvas.width = img.width;
                        canvas.height = img.height;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0);
                        canvas.toBlob(blob => {
                            if (blob) {
                                resolve(blob);
                            } else {
                                reject(new Error('Failed to convert image to PNG'));
                            }
                        }, 'image/png');
                    };
                    img.onerror = () => reject(new Error('Failed to load image for conversion'));
                    img.src = imageSrc;
                });
            }

            function stopGeneration() {
                if (abortController) {
                    abortController.abort();
                }
                isGenerating = false;
                document.getElementById('loading').style.display = 'none';
                document.getElementById('placeholder').style.display = 'block';
                generateBtn.innerHTML = '<i class="fas fa-magic"></i> Générer l\'image';
                showToast('Génération arrêtée.', 'error');
                document.getElementById('seed').value = '';
                startCooldown();
            }

            function generateImage() {
                if (isWaiting) {
                    showToast('Veuillez attendre avant de générer une nouvelle image.', 'error');
                    return;
                }

                const prompt = document.getElementById('prompt').value.trim();
                if (!prompt) {
                    showToast('Veuillez entrer une description', 'error');
                    return;
                }

                currentPrompt = prompt;
                isGenerating = true;

                const loading = document.getElementById('loading');
                loading.style.display = 'flex';
                document.getElementById('placeholder').style.display = 'none';
                document.getElementById('generated-image').style.display = 'none';
                document.getElementById('image-overlay').classList.remove('show');

                generateBtn.innerHTML = '<i class="fas fa-stop"></i> Arrêter la génération';

                const model = document.getElementById('model').value;
                const dimensions = document.getElementById('dimensions').value.split('x');
                const width = parseInt(dimensions[0]);
                const height = parseInt(dimensions[1]);
                let seed = document.getElementById('seed').value;
                const style = document.getElementById('style-value').value;
                const enhance = document.getElementById('enhance').checked;
                const safe = document.getElementById('safe').checked;

                let aspectRatio;
                if (width === height) {
                    aspectRatio = '1:1';
                } else if (width === 800 && height === 600) {
                    aspectRatio = '4:3';
                } else if ((width === 1024 && height === 576) || (width === 1280 && height === 720)) {
                    aspectRatio = '16:9';
                } else if (width === 600 && height === 800) {
                    aspectRatio = '3:4';
                } else if ((width === 576 && height === 1024) || (width === 720 && height === 1280)) {
                    aspectRatio = '9:16';
                } else if ((width === 1600 && height === 400) || (width === 1920 && height === 480) || (width === 2048 && height === 512)) {
                    aspectRatio = '4:1';
                } else {
                    aspectRatio = `${width}:${height}`;
                }

                let modifiedPrompt = prompt;
                if (style !== 'default') {
                    modifiedPrompt += `, style ${style}`;
                }
                modifiedPrompt += `, aspect ratio ${aspectRatio}`;

                modifiedPrompt = modifiedPrompt.replace(/[^\x20-\x7E]/g, '');

                if (!seed) {
                    seed = Math.floor(Math.random() * 1000000);
                } else {
                    seed = parseInt(seed);
                    if (isNaN(seed)) {
                        seed = Math.floor(Math.random() * 1000000);
                    }
                }

                let url = `https://image.pollinations.ai/prompt/${encodeURIComponent(modifiedPrompt)}`;
                url += `?model=${model}&width=${width}&height=${height}`;
                url += `&nologo=true&private=true`;
                if (seed) url += `&seed=${seed}`;
                if (enhance) url += `&enhance=true`;
                if (safe) url += `&safe=true`;
                url += `&tamp=${Date.now()}`;

                const img = document.getElementById('generated-image');

                abortController = new AbortController();
                const signal = abortController.signal;

                fetch(url, { signal })
                    .then(response => response.blob())
                    .then(blob => {
                        if (isGenerating) {
                            const imageUrl = URL.createObjectURL(blob);
                            img.src = imageUrl;
                            document.getElementById('loading').style.display = 'none';
                            img.style.display = 'block';
                            document.getElementById('image-overlay').classList.remove('show');

                            addToHistory(prompt, imageUrl, seed, model, `${width}x${height}`, style);

                            showToast('Image générée avec succès !', 'success');

                            document.getElementById('seed').value = '';

                            generateBtn.innerHTML = '<i class="fas fa-magic"></i> Générer l\'image';

                            startCooldown();
                        }
                        isGenerating = false;
                    })
                    .catch(error => {
                        if (error.name === 'AbortError') {
                            // Géré par stopGeneration
                            return;
                        }
                        console.error('Failed to load image from URL:', url, error);
                        document.getElementById('loading').style.display = 'none';
                        document.getElementById('placeholder').style.display = 'block';
                        showToast('Erreur lors de la génération de l\'image (serveur indisponible ou entrée invalide). Réessayez plus tard.', 'error');
                        document.getElementById('seed').value = '';
                        generateBtn.innerHTML = '<i class="fas fa-magic"></i> Générer l\'image';
                        isGenerating = false;
                        startCooldown();
                    });

                img.onerror = function () {
                    console.error('Failed to load image from URL:', url);
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('placeholder').style.display = 'block';
                    showToast('Erreur lors de la génération de l\'image.', 'error');
                    document.getElementById('seed').value = '';
                    generateBtn.innerHTML = '<i class="fas fa-magic"></i> Générer l\'image';
                    isGenerating = false;
                    startCooldown();
                };
            }

            function addToHistory(prompt, imageUrl, seed, model, dimensions, style) {
                let history = JSON.parse(localStorage.getItem('imageHistory') || '[]');
                history.unshift({
                    prompt: prompt,
                    imageUrl: imageUrl,
                    seed: seed || null,
                    model: model,
                    dimensions: dimensions,
                    style: style,
                    timestamp: new Date().toISOString()
                });
                if (history.length > 10) {
                    history = history.slice(0, 10);
                }
                localStorage.setItem('imageHistory', JSON.stringify(history));
                loadHistory();
            }

            loadHistory();

            const examplePrompts = [
                "Un magnifique coucher de soleil sur l'ocean avec des palmiers",
                "Une ville futuriste avec des voitures volantes et des neons",
                "Un chiot corgi adorable jouant dans un champ de fleurs",
                "Un astronaute chevauchant un cheval sur Mars",
                "Un dirigeable steampunk volant a travers les nuages"
            ];

            const randomPromptBtn = document.createElement('button');
            randomPromptBtn.className = 'btn btn-secondary';
            randomPromptBtn.innerHTML = '<i class="fas fa-random"></i> Exemple aléatoire';
            randomPromptBtn.style.marginTop = '0.5rem';
            randomPromptBtn.addEventListener('click', () => {
                const randomPrompt = examplePrompts[Math.floor(Math.random() * examplePrompts.length)];
                document.getElementById('prompt').value = randomPrompt;
            });

            document.querySelector('.form-group:first-child').appendChild(randomPromptBtn);
        });
    </script>
</body>

</html>